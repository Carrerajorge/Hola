Endurece y lleva a nivel producción la capacidad del Agente de web navigation + information retrieval (sin tocar el chat): implementa un módulo WebTool con arquitectura en capas SearchAdapter (SERP) + FetchAdapter (HTTP fetch) + BrowserAdapter (Playwright) orquestadas por un RetrievalPipeline que haga URL canonicalization (remove tracking params), dedupe por content_hash/canonical, scoring/ranking por calidad (domain allowlist, recency, HTTPS, authoritativeness), y extracción con Readability/trafilatura + fallback DOM-text; soporta SPAs con estrategias de render (waitForLoadState('domcontentloaded'|'networkidle'), retries, scroll-to-bottom incremental, pagination discovery, cookie banner handling), y captura de tablas/estructuras (HTML tables→JSON/CSV, headings→outline) con un Extractor tipado que devuelva ExtractedDocument{title, url, canonicalUrl, publishedAt?, author?, text, tables[], headings[], language, tokensEstimate, extractionMethod, timings}; añade un CitationsBuilder que obligue a que cada claim importante del agente esté respaldado por sources[] con url,title,domain,retrievedAt,quote<=25w,locator (anchor/selector) y verificación de cobertura (si no hay cita, bajar confidence o pedir más fuentes); implementa resiliencia: per-domain rate limiter (token bucket), retries con exponential backoff + jitter, circuit breaker por dominio, manejo explícito de 403/429/captcha (detectar challenge y fallback automático a otras fuentes), timeouts (connect/read/render), y cache (ETag/Last-Modified + persistent KV/Redis) con TTL y invalidación; aplica seguridad/abuso: SSRF protection (bloquear IPs privadas, file://, localhost, metadata endpoints), sanitize HTML, isolate browser context, no-execute policy para instrucciones dentro del contenido (prompt-injection hardening: separar ‘content’ vs ‘instructions’, strip scripts, never call tools based solely on webpage text), y allow/deny lists configurables por env; expón endpoints compatibles para el agente (POST /api/tools/web/search, POST /api/tools/web/browse) con schemas Zod y métricas; agrega observabilidad (structured logs con runId/stepId/correlationId, spans por fase search/fetch/render/extract, metrics p95/p99, error taxonomy); entrega una suite de pruebas deterministas: unit (canonicalize, rank, cite coverage, SSRF guard), integration (mock SERP + fixture HTML dinámico/estático + tablas), E2E (Playwright contra 3 páginas de prueba, 429 simulation, captcha simulation), y benchmarks (npm run web:bench) con umbrales (p95 extracción <3s estático, <8s dinámico) y outputs en test_results/; documenta en replit.md configuración de API keys, límites, cache, políticas de dominios y ejemplos de respuesta con citas estructuradas.”