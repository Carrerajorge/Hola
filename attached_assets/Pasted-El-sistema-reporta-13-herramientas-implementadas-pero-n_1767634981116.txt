El sistema reporta 13 herramientas implementadas pero no funcionan correctamente en producción. Requiero corrección inmediata y expansión del sistema de procesamiento de archivos. Ejecutar las siguientes acciones:
1. DIAGNÓSTICO Y CORRECCIÓN DE HERRAMIENTAS NO FUNCIONALES:
Las 11 herramientas core (plan, message, shell, file, search, browser, schedule, expose, webdev_init_project, slides, generate) más las 2 adicionales (document, research) están registradas pero no operativas. Verificar: que el ToolRegistry esté correctamente instanciado en el runtime, que los endpoints /api/sandbox/agent/tool y /api/sandbox/agent/run ejecuten las herramientas sin errores 500, que la autenticación no bloquee requests legítimos, y que el frontend invoque correctamente los endpoints con los parámetros esperados. Ejecutar test de cada herramienta con payload mínimo y corregir errores específicos encontrados.
2. IMPLEMENTACIÓN DE SISTEMA UNIVERSAL DE PROCESAMIENTO DE ARCHIVOS:
La aplicación actualmente no puede leer archivos de código como .py, .ts, .js ni otros formatos. Implementar un FileProcessor universal que soporte: detección automática de MIME type y extensión, lectura de archivos de texto y código (py, js, ts, java, cpp, html, css, json, xml, yaml, md, txt, csv, log, sh, sql, y cualquier texto plano), procesamiento de documentos Office (docx, xlsx, pptx) usando python-docx/openpyxl/python-pptx, extracción de texto de PDFs con PyPDF2 o pdfplumber, análisis de imágenes con Pillow incluyendo OCR opcional con pytesseract, manejo de archivos comprimidos (zip, tar, gz, rar) con extracción automática, procesamiento de audio/video extrayendo metadata con ffprobe, y fallback a lectura binaria con encoding base64 para formatos desconocidos. El sistema debe implementar detección automática del tipo sin depender solo de la extensión, manejo robusto de errores con mensajes descriptivos, conversión automática cuando sea posible (ej: docx a texto), API unificada POST /api/files/process que acepte upload multipart o URL, respuesta estructurada con contenido extraído, metadata y formato detectado, y arquitectura extensible mediante plugins para formatos futuros.
3. INTEGRACIÓN CON HERRAMIENTAS EXISTENTES:
Conectar el FileProcessor con la herramienta file del Sandbox Agent para que cualquier archivo cargado por el usuario sea automáticamente procesado e interpretado. La herramienta document debe usar este sistema para crear y leer cualquier formato. El agente debe poder recibir archivos como agente_ia_v5.py y analizarlos, ejecutarlos o modificarlos según la solicitud.
4. VERIFICACIÓN FINAL:
Ejecutar pruebas con: archivo Python (.py) - debe leer y mostrar contenido, archivo PDF - debe extraer texto, archivo Excel - debe parsear datos en JSON, imagen con texto - debe extraer via OCR si está habilitado, archivo ZIP - debe listar contenidos. Confirmar que todas las 13 herramientas responden correctamente via API y que el frontend permite al usuario cargar cualquier archivo y ver resultados procesados.
Reportar: errores corregidos, herramientas verificadas funcionando, formatos de archivo soportados, y confirmación de que el usuario puede interactuar con todas las funcionalidades desde la aplicación web publicada.